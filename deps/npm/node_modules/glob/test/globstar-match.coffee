Glob = require("../glob.js").Glob
test = require("tap").test
test "globstar should not have dupe matches", (t) ->
  pattern = "a/**/[gh]"
  g = new Glob(pattern,
    cwd: __dirname
  )
  matches = []
  g.on "match", (m) ->
    console.error "match %j", m
    matches.push m
    return

  g.on "end", (set) ->
    console.error "set", set
    matches = matches.sort()
    set = set.sort()
    t.same matches, set, "should have same set of matches"
    t.end()
    return

  return

